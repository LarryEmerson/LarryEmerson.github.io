(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{2:function(e,t,n){"use strict";var o=n(99),i=void 0;t.a={saveToLocal:function(e,t){localStorage.setItem(e,t)},getFromLocal:function(e){return localStorage.getItem(e)},ConsoleON:!0,request:function(e,t,n,i){return new o.a(e,t,i).api(n)},empty:function(e){return void 0===e||""===e||null===e},urlParam:function(e){return Object.keys(e).map(function(t){return i.empty(e[t])?encodeURIComponent(t)+"=":"object"===typeof e[t]?encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(e[t])):encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},uuid:function(e,t){var n,o,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=[];if(t=t||i.length,e)for(n=0;n<e;n++)a[n]=i[0|Math.random()*t];else for(a[8]=a[13]=a[18]=a[23]="-",a[14]="4",n=0;n<36;n++)a[n]||(o=0|16*Math.random(),a[n]=i[19===n?3&o|8:o]);return a.join("")},assign:function(e){var t;if("object"===typeof e&&null!==e)for(var n in t=Array.isArray(e)?[]:{},e)"object"===typeof e[n]&&0!==!n.indexOf("_")?t[n]=this.assign(e[n]):t[n]=e[n];else t=e;return t},compare:function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=Object.keys(e),o=0;void 0!==e&&o<n.length;o++)if(e[n[o]]!==t[n[o]]){if(!(e[n[o]]instanceof Object&&t[n[o]]instanceof Object))return!1;if(!this.compare(e[n[o]],t[n[o]]))return!1}return!0}}},237:function(e,t,n){e.exports=n(529)},242:function(e,t,n){},245:function(e,t,n){},247:function(e,t,n){e.exports=n.p+"static/media/global.293907fa.less"},249:function(e,t,n){},265:function(e,t){},277:function(e,t){},279:function(e,t){},507:function(e,t){},508:function(e,t){},529:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),a=n(24),r=n.n(a),s=(n(242),n(50)),c=n.n(s),l=n(98),u=n(9),f=n(5),d=n(27),h=n(25),g=n(26),p=(n(245),n(246),n(247),n(248),n(249),n(66)),m=n(20),v=n.n(m),y=n(3),k=n.n(y),b=n(10),S=n.n(b),_=n(2),w=n(33).Buffer,E="#ddd",x="#2479ee",C="#888",O="#ff122d",I="#ff6515",j="https://gitee.com/oauth/token/",L="https://gitee.com/api/",P="5c6c317bb54d93cdc607baddd7afd982444d213532857e01d342df80735879d2",R="9718af6f899cc733c61c6ffa0963fddc3ce3c8114500574197040525a13a538d",T="https://larryemerson.github.io",D="GiteeStorage",q={T:{color:"#ff4c1e",fontSize:20,fontWeight:"bold",marginBottom:20,width:"100%",textAlign:"center"},title:{color:"#ff4c1e",fontSize:18,fontWeight:"bold",marginBottom:8,marginTop:8},code:{color:"#ffa334",fontSize:12},subtitle:{color:"#ff4c1e",fontSize:15,marginBottom:10}},F=[{type:"T",content:"JS \u811a\u672c\u914d\u7f6e"},{type:"title",content:"1-https://gitee.com"},{type:"subtitle",content:"\u811a\u672c\u4f7f\u7528gitee\u8fdb\u884c\u7ba1\u7406\uff0c\u53ef\u4ee5\u5efa\u7acb\u79c1\u6709\u4ed3\u5e93\u3002\u5e94\u7528\u652f\u6301\u767b\u5f55\u6388\u6743\uff0c\u81ea\u4e3b\u9009\u62e9\u914d\u7f6e\u6587\u4ef6\u3002"},{type:"title",content:"2-\u83dc\u5355\u6570\u636e\u6e90\uff1aPMConfigs.json"},{type:"code",content:'{\n  "Source": [ \n    {\n      "title": "\u9ad8\u6e05\u5566-\u539f\u76d8",\n      "config": "https://gitee.com/larryemerson/PersonalConfigs/raw/master/gaoqing_la.json",\n      "valid": 1\n    },\n...\n  ]\n}'},{type:"subtitle",content:"Source\u6570\u7ec4\uff1a\u5de6\u4fa7\u83dc\u5355\u680f\u6570\u636e\u6e90\ntitle\uff1a\u83dc\u5355\u540d\u79f0\nconfig\uff1a\u5bf9\u5e94\u7684json\u6587\u4ef6\u5730\u5740\nvalid\uff1a\u662f\u5426\u9ed8\u8ba4\u9700\u8981\u9690\u85cf(\u83dc\u5355\u4e0b\u65b9\u773c\u775b\u56fe\u6807\u7528\u4e8e\u5f00\u542f\u6216\u9690\u85cf)"},{type:"title",content:"3-\u83dc\u5355\u5bf9\u5e94\u7684config\u6587\u4ef6\uff1agaoqing_la.json"},{type:"code",content:'{\n    "Site": "http://gaoqing.la/bluray/",\n    "Decode": "utf8",\n    "RequestType": "rnfb",\n    "ScriptListURL": "(site,currentPage)=>`${site}page/${currentPage}`",\n'+"    \"ScriptListResponse\": \"(responsespan)=>{var $ = this.Cheerio.load(responsespan);var post_hover = $('.post_hover');var records = [];post_hover.each(function (i, v) {v = post_hover[i];var thumbnail = $(v).find('.thumbnail');var article = $(v).find('.article');var img = $(thumbnail).find('img');var a = $(article).find('a');var timestamp = new Date().toLocaleDateString();var href = $(a).attr('href');var title = $(a).attr('title');var imgs=$(img).attr('src');imgs=Array.isArray(imgs)?imgs:[imgs]; imgs=imgs.map(function(image){if(image.indexOf('http')<0){return 'http://gaoqing.la'+image;}return image;}); var record = {id: href,timestamp: timestamp,href: href,title: title,images: imgs}; records.push(record);});return records;}\",\n    \"ScriptDetailsURL\": \"(site,url)=>`${url}`\",\n    \"ScriptDetailsResponse\": \"(responsespan)=>{var $ = this.Cheerio.load(responsespan);let ctxs = $('.context').find('#post_content');let spans = $(ctxs).find('span');let hrefs = $(ctxs).find('a');let data = {texts: [], hrefs: []};let spanKeys = Object.keys(spans);spanKeys.map(function (i, v) {if (!isNaN(parseInt(i))) {v = spans[i];data.texts.push($(v).text().trim());}});let hrefKeys = Object.keys(hrefs);hrefKeys.map(function (i, v) {if (!isNaN(parseInt(i))) {v = hrefs[i];let tmp = {title: $(v).text(),href: $(v).attr('href').trim()}data.hrefs.push(tmp);}});return data;}\"\n}"},{type:"subtitle",content:'Site\uff1a\u722c\u866b\u5730\u5740\nDecode\uff1a\u89e3\u7801\u683c\u5f0f\uff08\u7a7a\u3001utf8\u3001gb2312\uff09\nRequestType\uff1a\u9ed8\u8ba4\u4e3a"rnfb"\u3002\nScriptListURL\uff1a\u8bba\u575b\u5404\u5206\u7c7b\u5730\u5740\u6bd4\u8f83\u56fa\u5b9a\uff0ccurrentPage\u4f1a\u5728\u6210\u529f\u8bf7\u6c42\u540e\u9012\u589e\u3002\u901a\u8fc7site\u53cacurrentPage\u4e24\u4e2a\u53c2\u6570\u62fc\u63a5\u5730\u5740\u3002\nScriptListResponse\uff1a\u89e3\u6790\u4e0a\u8ff0\u5730\u5740\u8fd4\u56de\u7684\u5185\u5bb9\u3002\n\u901a\u8fc7var $ = this.Cheerio.load(responsespan)\u6765\u89e3\u6790\u3002\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u4e3avar records = [{id: href,timestamp: timestamp,href: href,title: title,images: imgs};]\u3002\n\u5176\u4e2d\u4e3aid\u7528\u4e8e\u6807\u8bc6\u552f\u4e00\u6027\uff0ctimestamp\u7528\u4e8e\u8868\u793a\u751f\u6210\u65f6\u95f4\uff0chref\u4e3a\u5b50\u8be6\u60c5\u8df3\u8f6c\u5730\u5740\u3002title\u662f\u6807\u9898\u3002images\u662f\u76f8\u5173\u56fe\u7247\u3002\nScriptDetailsURL\uff1a\u901a\u8fc7site\u53caurl(\u4e0a\u8ff0\u7684href)\u6765\u62fc\u63a5\u8be6\u60c5\u8bf7\u6c42\u5730\u5740\u3002\nScriptDetailsResponse\uff1a\u901a\u8fc7this.Cheerio\u6765\u89e3\u6790\u8fd4\u56de\u5185\u5bb9\u3002\n\u8fd4\u56de\u6570\u636e\u683c\u5f0f\u4e3a:[{texts: [], images: [], hrefs: [{title: title, href: href}]}]\u3002\n\u5176\u4e2dhrefs\u4e3a\u4e0b\u8f7d\u5730\u5740\u6570\u7ec4\uff0ctitle\u4e3a\u4e0b\u8f7d\u5185\u5bb9\u7684\u663e\u793a\u540d\u79f0\uff08\u9700\u8981\u540c\u65f6\u63d2\u5165\u5230texts\u4e2d\uff09\uff0chref\u4e3a\u771f\u5b9e\u4e0b\u8f7d\u5730\u5740\u3002\ntexts\u4e3a\u9700\u8981\u663e\u793a\u7684\u6587\u672c\u5185\u5bb9\uff0cimages\u4e3a\u9700\u8981\u663e\u793a\u7684\u56fe\u7247(\u5982\u679c\u4e0d\u5b58\u5728\u5219\u5bfb\u627eScriptListResponse\u4e2d\u7684images)\u3002\u9ed8\u8ba4\u56fe\u7247\u5728\u6587\u5b57\u4e0a\u65b9\u3002'}],W="url",H="list",N={Idle:0,Auth:1,ListUser:2,Repos:3,Files:4},U=function(){function e(){Object(u.a)(this,e),this.storage=void 0}return Object(f.a)(e,null,[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance.getStorage(),e.instance}}]),Object(f.a)(e,[{key:"getStorage",value:function(e){console.log("getStorage",this.storage),this.storage?e&&e(this.storage):(this.storage=_.a.getFromLocal(D)||{},e&&e(this.storage))}},{key:"save",value:function(){_.a.saveToLocal(D,this.storage)}},{key:"getAuthorization",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={type:W,result:"https://gitee.com/oauth/authorize?client_id=".concat(P,"&redirect_uri=").concat(T,"&response_type=code")};t?e&&e(n):this.getStorage(function(t){Object.keys(t||{}).length>0&&(n.type=H,n.result=t),e&&e(n)})}},{key:"getUser",value:function(t,n){var o=this,i=function(e){var t=e.code;return{url:j,params:{grant_type:"authorization_code",code:t,client_id:P,redirect_uri:T,client_secret:R}}}({code:t});_.a.request("",void 0,i.url).success(function(t,a){a.json().then(function(t){i=function(e){var t=e.access_token;return{url:L+"v5/user?access_token="+t,params:void 0}}(t),_.a.request("",void 0,i.url).success(function(i,a){a.json().then(function(i){t.user=i;var a=Object.assign({},t);a.user=i,o.storage[i.name]=a,e.getInstance().save(),n&&n(Object.values(o.storage))})}).error(function(e){console.log(i.url,e)}).get()})}).error(function(e){console.log(i.url,e)}).post(i.params)}},{key:"checkAccessExpired",value:function(t,n){var o=this,i=o.storage[t.user.name],a=(new Date).getTime();if(a/=1e3,parseFloat(a)-parseFloat(i.created_at)-parseFloat(i.expires_in)>0){var r=function(e){var t=e.refresh_token;return{url:j,params:{grant_type:"refresh_token",refresh_token:t}}}({refresh_token:i.refresh_token});_.a.request("",void 0,r.url).success(function(a,r){r.json().then(function(a){o.storage[t.user.name]=Object.assign(i,a),e.getInstance().save(),n&&n(o.storage[t.user.name])})}).error(function(e){S.a.error({message:"\u6388\u6743\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u6388\u6743\uff01"})}).post(r.params)}else n&&n(t)}},{key:"getRepos",value:function(t,n){var o=this;o.checkAccessExpired(t,function(t){var i=function(e){var t=e.access_token;return{url:L+"v5/user/repos?access_token="+t,params:void 0}}(t);_.a.request("",void 0,i.url).success(function(i,a){a.json().then(function(i){o.storage[t.user.name].repos=i,e.getInstance().save(),n&&n(i)})}).error(function(e){S.a.error({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u5c1d\u8bd5\u91cd\u65b0\u6388\u6743"}),console.log(i.url,e)}).get()})}},{key:"getBranch",value:function(t,n,o){this.checkAccessExpired(t,function(t){var i=function(e){var t=e.access_token,n=e.repo;return{url:L+"v5/repos/".concat(n.owner.login,"/").concat(n.name,"/branches/").concat(n.default_branch,"?access_token=")+t,params:void 0}}({access_token:t.access_token,repo:n});_.a.request("",void 0,i.url).success(function(a,r){r.json().then(function(a){n.branch=a,e.getInstance().save(),i=function(e){var t=e.access_token,n=e.repo,o=e.branch;return{url:L+"v5/repos/".concat(n.owner.login,"/").concat(n.name,"/git/trees/").concat(o.commit.sha,"?access_token=")+t,params:void 0}}({access_token:t.access_token,repo:n,branch:a}),_.a.request("",void 0,i.url).success(function(i,r){r.json().then(function(i){n.tree=i,e.getInstance().save(),o&&o(t,n,a,i)})}).error(function(e){console.log(i.url,e)}).get()})}).error(function(e){console.log(i.url,e)}).get()})}},{key:"getFile",value:function(e,t){var n=function(e){var t=e.access_token,n=e.repoOwner,o=e.repoName,i=e.fileSha;return{url:L+"v5/repos/".concat(n,"/").concat(o,"/git/blobs/").concat(i,"?access_token=")+t,params:void 0}}({access_token:e.access_token,repoOwner:e.repoOwner,repoName:e.repoName,fileSha:e.fileSha});_.a.request("",void 0,n.url).success(function(e,n){n.json().then(function(e){var n=new w(e.content,e.encoding).toString();try{var o=JSON.parse(n);t&&t(o)}catch(i){S.a.error({message:"\u8bf7\u68c0\u67e5\u9009\u62e9\u7684\u6587\u4ef6\u662f\u5426\u662fJSON\u683c\u5f0f"})}})}).error(function(e){console.log(n.url,e)}).get()}},{key:"onCheckPath",value:function(e,t){}}]),e}();U.instance=null;var A=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={giteeUrl:void 0,userList:[],viewStatus:N.Idle,repos:[],files:[]},e.currentAccess=void 0,e.currentRepo=void 0,e.callback=void 0,e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"getConfigFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0,i=(arguments.length>4&&arguments[4],this);i.callback=e,i.isConfig=n,i.path=o,U.getInstance().getAuthorization(function(e){e.type===W?(i.setState({viewStatus:N.Auth,giteeUrl:e.result}),window.location=e.result):i.setState({viewStatus:N.ListUser,userList:Object.values(e.result||[])})},t)}},{key:"onShouldStartLoadWithRequest",value:function(e){var t=this;if(e.startsWith(T)){var n=(e=e.substr(e.indexOf("?")+1)).split("&"),o={};if(n.forEach(function(e){var t=e.split("=");o[t[0]]=t[1]}),o.code){var i=o.code;U.getInstance().getUser(i,function(e){t.setState({userList:e||[],viewStatus:N.ListUser})})}else o.error&&(t.setState({viewStatus:N.Idle}),t.props.invisible&&t.props.invisible(),S.a.error({message:"\u6388\u6743\u5931\u8d25"+(o.error_description?":"+decodeURIComponent(o.error_description):"")}));return!1}return"https://gitee.com/"!==e||(console.log(">>>>",t.callback),t.setState({viewStatus:N.Idle},function(){t.getConfigFile(t.callback,!0)}),!0)}},{key:"render",value:function(){var e=this,t=function(e,t,n,o){return i.a.createElement("div",{style:{borderRadius:6,width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.7)"}},i.a.createElement("div",{style:{flexDirection:"row",width:"100%",height:36,borderBottomWidth:1,borderBottomColor:C,alignItems:"center",justifyContent:"center",paddingHorizontal:15}},n>N.ListUser?i.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,left:0,width:40,alignItems:"center",justifyContent:"center"},onClick:function(){o&&o()}},i.a.createElement(k.a,{type:"left",size:18,color:I})):null,i.a.createElement("span",{style:{color:I,fontSize:16,fontWeight:"bold"}},e),n===N.ListUser?i.a.createElement("div",{style:{position:"absolute",top:0,bottom:0,right:10,width:80,alignItems:"center",justifyContent:"center"},onClick:function(){o&&o()}},i.a.createElement("span",{style:{color:x,fontSize:15}},"\u91cd\u65b0\u6388\u6743")):null),i.a.createElement("div",{style:{flex:1,overflow:"scroll"}},t))};return e.props.visible?i.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.3)",alignItems:"center",justifyContent:"center"}},i.a.createElement("div",{style:{width:"85%",height:"80%",borderRadius:6,borderWidth:1,borderColor:C}},e.state.giteeUrl&&e.state.viewStatus===N.Auth?i.a.createElement("div",{style:{width:"100%",height:"100%"},source:{uri:e.state.giteeUrl},onError:function(e){console.log("onError",e.nativeEvent)},onLoadEnd:function(t){console.log("onLoadEnd",t.nativeEvent),e.onShouldStartLoadWithRequest(t.nativeEvent.url)},onShouldStartLoadWithRequest:function(t){return console.log("web onShouldStartLoadWithRequest",t),e.onShouldStartLoadWithRequest(t.url)}}):e.state.viewStatus===N.ListUser?t("\u8d26\u6237\u9009\u62e9",e.state.userList.map(function(t,n){return i.a.createElement("div",{key:n,style:{height:36,width:"100%",borderBottomColor:C,borderBottomWidth:1,flexDirection:"row",paddingHorizontal:15,alignItems:"center"},onClick:function(){U.getInstance().getRepos(t,function(n){e.currentAccess=t,e.setState({viewStatus:N.Repos,repos:n||[]})})}},i.a.createElement(k.a,{type:"user",size:16,color:E}),i.a.createElement("span",{style:{marginLeft:8,fontSize:15,color:E}},t.user.name))}),e.state.viewStatus,function(){e.getConfigFile(e.callback,!0)}):e.state.viewStatus===N.Repos?t("Repos",e.state.repos.map(function(t,n){return i.a.createElement("div",{key:n,style:{height:36,width:"100%",borderBottomColor:C,borderBottomWidth:1,flexDirection:"row",paddingHorizontal:15,alignItems:"center"},onClick:function(){e.currentRepo=t,U.getInstance().getBranch(e.currentAccess,t,function(t,n,o,i){e.setState({viewStatus:N.Files,files:i.tree||[]})})}},i.a.createElement(k.a,{type:"folder1",size:16,color:E}),i.a.createElement("span",{style:{marginLeft:8,fontSize:15,color:E}},t.name))}),e.state.viewStatus,function(){e.setState({viewStatus:e.state.viewStatus-1})}):e.state.viewStatus===N.Files?t("Files",e.state.files.map(function(t,n){return i.a.createElement("div",{key:n,style:{height:36,width:"100%",borderBottomColor:C,borderBottomWidth:1,flexDirection:"row",paddingHorizontal:15,alignItems:"center"},onClick:function(){e.isConfig&&U.getInstance().getFile({access_token:e.currentAccess.access_token,repoOwner:e.currentRepo.owner.login,repoName:e.currentRepo.name,fileSha:t.sha},function(t){if(console.log("\u6587\u4ef6\u9009\u62e9",t),t.Source){t=t.Source;var n={};e.state.files.forEach(function(e){n[e.path]=e.sha}),t.forEach(function(o,i){t[i].access_token=e.currentAccess.access_token,t[i].repoOwner=e.currentRepo.owner.login,t[i].repoName=e.currentRepo.name;var a=o.config.split("/");t[i].fileSha=n[a.pop()]}),e.setState({viewStatus:N.Idle}),e.props.invisible&&e.props.invisible(),e.callback&&e.callback(t)}else S.a.error({message:"\u8bf7\u68c0\u67e5\u9009\u62e9\u7684\u6587\u4ef6\u662f\u5426\u542b\u6709Source\u6570\u7ec4"})})}},i.a.createElement(k.a,{type:"file1",size:16,color:E}),i.a.createElement("span",{style:{marginLeft:8,fontSize:15,color:E}},t.path))}),e.state.viewStatus,function(){e.setState({viewStatus:e.state.viewStatus-1})}):null,i.a.createElement("div",{style:{position:"absolute",top:-15,right:-15},onClick:function(){e.setState({giteeUrl:void 0}),e.props.invisible&&e.props.invisible()}},i.a.createElement(k.a,{type:"closecircle",size:28,color:O})))):null}}]),t}(o.Component),M=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return e.props.visible?i.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0.5)"}},i.a.createElement("div",{style:{flex:1}},i.a.createElement("div",{style:{paddingHorizontal:15,paddingVertical:15,overflow:"scroll"}},F.map(function(e){var t=e.type,n=e.content;return i.a.createElement("span",{style:q[t]},n)}),i.a.createElement("div",{style:{alignItems:"center",justifyContent:"center"}},i.a.createElement("div",{style:{marginTop:15,borderRadius:6,width:"80%",paddingVertical:10,alignItems:"center",justifyContent:"center",backgroundColor:"#1b7aee"},onClick:function(){e.props.invisible&&e.props.invisible()}},i.a.createElement("span",{style:{fontSize:16,color:"#fff"}},"\u6211\u77e5\u9053\u4e86")))))):null}}]),t}(o.Component),z=(n(491),n(33).Buffer,function(){function e(t){Object(u.a)(this,e);this.requestConfig=t,this.configUrl=t.config,this.currentPage=1,this.recordsList=[],this.pendingFetchList=[],this.callback=void 0,this.pageNo=0,this.pageSize=1}return Object(f.a)(e,[{key:"getCombinedImages",value:function(e,t){var n={};return e&&e.forEach(function(e){n[e]=e}),t&&t.forEach(function(e){n[e]=e}),Object.keys(n)}},{key:"_ff",value:function(e){var t=v.a.load(e),n=t("head>title").text(),o="",i={texts:[n],hrefs:[],images:[]};return t("form>.read_tpc").find("a").each(function(e,a){if(t(a).find("img"))i.images.push(t(a).attr("src"));else{var r=t(a).attr("href"),s=t(a).text()||n;r&&(o={title:s,href:r}),i.texts.push(o.title),i.hrefs.push(o)}}),i}},{key:"__ff",value:function(e,t){var n=v.a.load(e),o=n(".context").find("#post_content"),i=n(o).find("span"),a=n(o).find("a"),r={texts:[],hrefs:[]};Object.keys(i).map(function(e,t){isNaN(parseInt(e))||(t=i[e],r.texts.push(n(t).text().trim()))}),Object.keys(a).map(function(e,t){if(!isNaN(parseInt(e))){t=a[e];var o={title:n(t).text(),href:n(t).attr("href").trim()};r.hrefs.push(o)}}),t&&t(r)}},{key:"___f",value:function(e,t){var n=v.a.load(e),o=[];n(".tableList").each(function(e,t){n(t).find(".vTitle").each(function(e,t){var i=(new Date).toLocaleDateString(),a=n(t).attr("href"),r={id:a,timestamp:i,href:a,title:n(t).text(),images:[]};o.push(r)})}),t&&t(o)}},{key:"runFetcher",value:function(){var e=this;e.fetcherTimer||(e.fetcherTimer=setInterval(function(){var t=e.pendingFetchList.shift();t?Object(p.a)(e.configs.ScriptDetailsURL)(e.configs.Site,t.href,function(n){_.a.request("",{"Content-Security-Policy":"upgrade-insecure-requests"},n,e.configs.RequestType).success(function(o,i){i.text().then(function(o){Object(p.a)(e.configs.ScriptDetailsResponse)(o,function(o){o.record=t,o.id=n,o.images=e.getCombinedImages(t.images,o.images),e._callbackWithData(o),e.isFetching=!1})})}).error(function(t){e._callbackWithData(void 0)}).get(void 0,e.configs.Decode)}):e.stopFetcher()},50))}},{key:"_f_details",value:function(e){console.log(">>>>_f_details",e);var t=v.a.load(e),n={texts:[],images:[],hrefs:[]};return t(".pg_viewthread>.wp>.wp").find("img").each(function(e,o){n.images.push("http://www.code4app.com/"+t(o).attr("file"))}),n}},{key:"fff",value:function(e){var t=v.a.load(e),n=t(".bd3r>.co_area2"),o=[];return n.find("table").each(function(e,n){var i=t(n).find("a").next().attr("href")||t(n).find("a").attr("href");o.push({href:i})}),o}},{key:"stopFetcher",value:function(){this.fetcherTimer&&clearInterval(this.fetcherTimer),this.fetcherTimer=void 0}},{key:"_fetchDetails",value:function(){this.isFetching=!0;var e=this.recordsList.shift();e?(this.pendingFetchList.push(e),this.runFetcher()):(this.isFetching=!1,this._getDetails(this.callback))}},{key:"getDetails",value:function(e,t){var n=this;if(n.callback=e,n.pageNo=0,!n.isFetching)if(n.configs)n._getDetails();else{n.configUrl;n.requestConfig.access_token?U.getInstance().getFile({access_token:n.requestConfig.access_token,repoOwner:n.requestConfig.repoOwner,repoName:n.requestConfig.repoName,fileSha:n.requestConfig.fileSha},function(e){n.configs=e,n._getDetails()}):_.a.request("",{"Content-Security-Policy":"upgrade-insecure-requests"},n.configUrl).success(function(e,t){t.json().then(function(e){n.configs=e,n._getDetails()})}).error(function(e){}).get()}}},{key:"_getDetails",value:function(){this.recordsList.length>0?this._fetchDetails(this.recordsList.shift()):this._fetchDataList()}},{key:"_fetchDataList",value:function(){var e=this;Object(p.a)(e.configs.ScriptListURL)(e.configs.Site,e.currentPage,function(t){_.a.request("",{"Content-Security-Policy":"upgrade-insecure-requests"},t,e.configs.RequestType).success(function(t,n){e.currentPage++,(void 0!=n.data?n.data:n).text().then(function(t){Object(p.a)(e.configs.ScriptListResponse)(t,function(t){e.recordsList=e.recordsList.concat(t),e._fetchDetails()})})}).error(function(t){e._callbackWithData(void 0)}).get(void 0,e.configs.Decode)})}},{key:"_f_list",value:function(e){console.log(">>>>_f_list",e);var t=v.a.load(e),n=[],o=t(".waterfall");return t(o).find("li").each(function(e,o){var i=t(o).find("a").attr("href");i&&n.push({href:i})}),n}},{key:"ffff",value:function(e){var t=v.a.load(e),n=t(".bd3r>.co_area2"),o=[];return n.find("table").each(function(e,n){var i=t(n).find("a").next().attr("href")||t(n).find("a").attr("href");o.push({href:i})}),o}},{key:"_callbackWithData",value:function(e){this.callback&&this.callback(e),this.callback=void 0}}]),e}()),B=n(148),K=n(236),$=n(40),V={savedLinks:[],historyList:[],showWKY:!1,showImage:!1,downloadsStorage:[]},Y=Object(o.createContext)(V),J=function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state=Object(K.a)({},V),n.toggleWKY=function(e){var t=Object($.a)(Object($.a)(n)),o=void 0===e?!t.state.showWKY:e;t.setState({showWKY:o})},n.toggleImage=function(e){var t=void 0===e?!n.state.showImage:e;return n.setState({showImage:t}),t},n.addDownload=function(e){var t=n.state.downloadsStorage,o=t.findIndex(function(t){return t.id===e.id});o>=0&&t.splice(o,1);var i=[e].concat(Object(B.a)(t));n.setState({downloadsStorage:i})},n.removeDownloads=function(e){e=Array.isArray(e)?e:[e];var t=n.state.downloadsStorage.filter(function(t){return!e.find(function(e){return(e.id||e)===t.id})});n.setState({downloadsStorage:t})},n.refreshDownloads=function(e){var t=n.state.downloadsStorage,o=[];t.forEach(function(t){var n=e.findIndex(function(e){return e.id===t.id});n>=0?o.push(e[n]):o.push(t)}),n.setState({downloadsStorage:o})},n.addHistory=function(e){var t=n.state.historyList,o=t.findIndex(function(t){return t.id===e.id});o>=0&&t.splice(o,1),n.setState({historyList:[e].concat(Object(B.a)(t))})},n.removeHistory=function(e){var t=n.state.historyList.filter(function(t){return!e.find(function(e){return e===t.id})});n.setState({historyList:t})},n.findHistory=function(e){return n.state.historyList.find(function(t){return t.id===e})},n.saveLink=function(e){var t=Object($.a)(Object($.a)(n)),o=n.state.savedLinks;e=(Array.isArray(e)?e:[e]).filter(function(e){return!t.getLink(e)}),n.setState({savedLinks:o.concat(e)})},n.getLink=function(e){var t=n.state.savedLinks;return!!e&&t.some(function(t){return t===e})},n}return Object(g.a)(t,e),Object(f.a)(t,[{key:"saveLinks",value:function(e){localStorage.setItem("StoreKeyLinks",JSON.stringify(e)),this.setState({savedLinks:e})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,n,o,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this,n=JSON.parse(localStorage.getItem("StoreKeyLinks")||"[]"),t.saveLinks(n),o=localStorage.getItem("downloadsStorage")||[],this.setState({downloadsStorage:o}),i=localStorage.getItem("showImage")||[],this.setState({showImage:i});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){t.savedLinks!==this.state.savedLinks&&this.saveLinks(this.state.savedLinks),t.downloadsStorage!==this.state.downloadsStorage&&localStorage.setItem("downloadsStorage",this.state.downloadsStorage),t.showImage!==this.state.showImage&&localStorage.setItem("showImage",this.state.showImage)}},{key:"render",value:function(){var e=this.state,t=e.savedLinks,n=e.historyList,o=e.showWKY,a=e.showImage,r=e.downloadsStorage;return i.a.createElement(Y.Provider,{value:{savedLinks:t,downloadsStorage:r,refreshDownloads:this.refreshDownloads,addDownload:this.addDownload,removeDownloads:this.removeDownloads,saveLink:this.saveLink,getLink:this.getLink,historyList:n,addHistory:this.addHistory,removeHistory:this.removeHistory,findHistory:this.findHistory,toggleWKY:this.toggleWKY,showWKY:o,toggleImage:this.toggleImage,showImage:a}},this.props.children)}}]),t}(o.PureComponent),G=n(51),Z=n.n(G),Q=n(235),X=n.n(Q),ee=n(234),te=n.n(ee),ne={image:{id:"image",key:"showImage",isContext:!0,iconH:"file-image",iconN:"file-image",icon:k.a},text:{id:"text",key:"showText",isContext:!1,iconH:"font-size",iconN:"font-size",icon:k.a},scroll:{id:"scroll",key:"toggleScroll",isContext:!1,iconH:"pic-center",iconN:"pic-center",icon:k.a},server:{id:"server",key:"toggleServer",isContext:!1,iconH:"database",iconN:"database",icon:k.a},visible:{id:"visible",key:"visible",isContext:!1,iconH:"eye",iconN:"eye-invisible",icon:k.a},history:{id:"history",key:"history",isContext:!1,iconH:"history",iconN:"history",icon:k.a},helper:{id:"helper",key:"giteeHelperVisible",isContext:!1,iconH:"info",iconN:"info",icon:k.a}},oe=0,ie=1,ae=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).viewabilityConfig={minimumViewTime:200,waitForInteraction:!0,itemVisiblePercentThreshold:95},e.state={dataSourceRendered:[],isRefreshing:!1,autoScrollPixels:1,autoScrollEnabled:0,pastesArray:[],togglePaste:!1,currentPages:[],selectedPage:void 0,contentOffset:0,inputServer:void 0,inputServer_:void 0,previewImages:[],previewImageIndex:0,screenWidth:"100%",screenHeight:"100%",togglePageSelection:!0},e.loadingFailed=0,e.fetchers={},e.requestConfig=void 0,e.giteeConfigs=[],e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){}},{key:"componentWillMount",value:function(){var e=this;console.log("GiteeConfigsKey",_.a.getFromLocal("GiteeConfigsKey")),e.state.currentPages.length>0?e.setState({selectedPage:e.state.currentPages.length>0?e.state.currentPages[0]:void 0}):(e.state[ne.text.key]=void 0!=_.a.getFromLocal(ne.text.key)||_.a.getFromLocal(ne.text.key),e.state[ne.visible.key]=void 0==_.a.getFromLocal(ne.visible.key)&&_.a.getFromLocal(ne.visible.key),e.getGitee(function(){_.a.request("",{"Content-Security-Policy":"upgrade-insecure-requests"},"https://gitee.com/larryemerson/PersonalConfigs/raw/master/PMConfigs.json").success(function(t,n){n.json().then(function(t){e.state.currentPages=t.Source||[];var n=[];e.giteeConfigs.forEach(function(t){e.state.currentPages.some(function(e){return e.config==t.config})||n.push(t)}),e.state.currentPages=e.state.currentPages.concat(n),e.onChangePageIndex(e.state.currentPages.length>0?0:void 0)})}).error(function(e){console.log("test error",e)}).get()}))}},{key:"getGitee",value:function(e){this.giteeConfigs=_.a.getFromLocal("GiteeConfigsKey")||[],e&&e()}},{key:"componentDidMount",value:function(){}}]),Object(f.a)(t,[{key:"onChangePageIndex",value:function(e){this.state.selectedPage!=e&&void 0!=e&&(this.loadingFailed=0,this.state.selectedPage=e,this.state.togglePageSelection=!1,this.requestConfig=this.state.currentPages[this.state.selectedPage],this.loadNews())}},{key:"loadNews",value:function(){this.state.dataSourceRendered=[],this.loadMore()}},{key:"loadMore",value:function(){var e=this;if(e.state[ne.history.key]){var t=e.getFolder(e.requestConfig.config);return e.historyFetch=e.historyFetch||new z({config:""}),void e.historyFetch.getDetails(function(t){if(t){var n=[],o=t.texts||[],i=t.images||[],a=t.hrefs||[],r=a&&a.reduce(function(e,t){var n=t.title,o=t.href;return e[n]=o,e},{});i.forEach(function(e){n.push({type:ie,content:e,config:t.config})}),n.push({type:oe,content:{texts:o,links:r}}),e.setState({dataSourceRendered:e.state.dataSourceRendered.concat(n),isRefreshing:!1},function(){e.listView&&e.listView.flashScrollIndicators()})}else e.loadingFailed++,S.a.error({message:"\u62c9\u53d6\u6570\u636e\u5931\u8d25"}),e.setState({isRefreshing:!1})},t)}e.setState({isRefreshing:!0},function(){e.requestConfig&&e.loadingFailed<3&&(e.fetchers[e.requestConfig.config]=e.fetchers[e.requestConfig.config]||new z(e.requestConfig),e.fetchers[e.requestConfig.config].getDetails(function(t){if(t){var n=[],o=t.texts||[],i=t.images||[],a=t.hrefs||[],r=a&&a.reduce(function(e,t){var n=t.title,o=t.href;return e[n]=o,e},{});i.forEach(function(e){n.push({type:ie,content:e,config:t.config})}),n.push({type:oe,content:{texts:o,links:r}}),e.setState({dataSourceRendered:e.state.dataSourceRendered.concat(n),isRefreshing:!1},function(){e.listView&&e.listView.flashScrollIndicators()})}else e.loadingFailed++,S.a.error({message:"\u62c9\u53d6\u6570\u636e\u5931\u8d25"}),e.setState({isRefreshing:!1})},e.state[ne.history.key]))})}},{key:"handleDownload",value:function(e,t){(0,this.context.addDownload)({title:t,link:e,addTime:new Date,copyTime:"",deleteTime:"",checked:!1,coppied:!1,deleted:!1})}},{key:"getFolder",value:function(e){var t=""+e;return t=(t=t.replace(".json","")).substr(t.lastIndexOf("/")+1)}},{key:"render",value:function(){var e=this,t=0,n=e.context,o=n.showImage,a=n.downloadsStorage,r=(n.toggleWKY,n.showWKY,n.currentOrientation),s=(parseInt(r?e.state.screenHeight:e.state.screenWidth),parseInt(r?e.state.screenWidth:e.state.screenHeight),function(e,t){return i.a.createElement(Z.a,{type:"primary",icon:e,className:"center",onClick:function(){return t&&t()}})}),c=function(t,n,o,a){return i.a.createElement("div",{className:"step-container"},s("minus",function(){e.state[n]-=100*o,e.state[n]=Math.max(e.state[n],0),a&&a()}),s("minus",function(){e.state[n]-=10*o,e.state[n]=Math.max(e.state[n],0),a&&a()}),s("minus",function(){e.state[n]-=o,e.state[n]=Math.max(e.state[n],0),a&&a()}),i.a.createElement("div",{className:"step-text-container"},i.a.createElement("div",{className:"step-text",style:{fontWeight:"bold"}},t),i.a.createElement("div",{className:"step-text"},e.state[n])),s("plus",function(){e.state[n]+=o,a&&a()}),s("plus",function(){e.state[n]+=10*o,a&&a()}),s("plus",function(){e.state[n]+=100*o,a&&a()}))};return i.a.createElement("div",{className:"mainRoot"},i.a.createElement("div",{className:"list"},e.state.dataSourceRendered.map(function(t,n){return function(t){var n=t.item,a=t.itemIndex,r=n.type,s=n.content;n.config;return r==ie&&o?i.a.createElement("div",{className:"item-img-container",key:a+"_"+r,onClick:function(){var t=[];e.state.dataSourceRendered.forEach(function(n){n.type==ie&&(t.push({url:n.content}),n.content==s&&(e.state.previewImageIndex=t.length-1))}),e.setState({previewImages:t})}},i.a.createElement("img",{className:"item-img"})):r==oe&&e.state[ne.text.key]?i.a.createElement("div",{key:a+"_"+r,style:{marginTop:15,marginBottom:20}},s.texts.map(function(t,n){var o=s.links[t];return o?i.a.createElement("div",{key:n,className:"item-text-container",onClick:function(){e.handleDownload(o,t)}},i.a.createElement("div",{className:"item-text"},t)):i.a.createElement("div",{key:n,className:"item-summary"},t)})):null}({item:t,itemIndex:n})})),a.length>0?i.a.createElement("div",{style:{position:"absolute",top:"15px",left:"10px"}},i.a.createElement(te.a,{count:a.length,showZero:!0},i.a.createElement(Z.a,{shape:"circle",type:"primary",icon:"download",onClick:function(){return e.setState({togglePaste:!0})}}))):null,e.state[ne.scroll.key]?i.a.createElement("div",{style:{absolute:"position",bottom:"60px",width:"100%",height:"20%",alignItems:"center",justifyContent:"center"},onClick:function(){e.state[ne.scroll.key]=!1,e.setState({})}},i.a.createElement("div",{style:{marginHorizontal:"15px",borderRadius:"6px",paddingHorizontal:"8px",paddingVertical:"5px",backgroundColor:"#888"}},c("\u9891\u7387","autoScrollEnabled",1,function(){e.setState({autoScrollEnabled:e.state.autoScrollEnabled},function(){e.state.autoScrollEnabled>0?e.startAutoScroll():e.stopAutoScroll()})}),c("\u50cf\u7d20","autoScrollPixels",1,function(){e.setState({autoScrollPixels:e.state.autoScrollPixels})}))):null,i.a.createElement(A,{ref:function(t){return e.gitee=t},visible:e.state[ne.server.key],invisible:function(){e.state[ne.server.key]=!1,e.setState({})}}),i.a.createElement(M,{visible:e.state[ne.helper.key],invisible:function(){e.state[ne.helper.key]=!1,e.setState({})}}),e.state.togglePageSelection?i.a.createElement("div",{className:"menu-page"},i.a.createElement("div",{className:"menu-page-list"},e.state.currentPages.map(function(n,o){return n.valid||e.state[ne.visible.key]?i.a.createElement(Z.a,{type:"ghost",style:{width:"100%",paddingVertical:"10px",backgroundColor:o==e.state.selectedPage?"#9e6946":++t%2==0?"rgba(200,200,200,0.4)":"rgba(255,255,255,0.4)",paddingLeft:"15px",justifyContent:"center"},key:o,onClick:function(){e.onChangePageIndex(o)}},i.a.createElement("div",{style:{color:o==e.state.selectedPage?"#ff6515":t%2==0?"rgba(250,250,250,0.8)":"rgba(220,220,220,0.8)"}},n.title)):null})),i.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",paddingLeft:"10px",width:"100%",height:"40px",backgroundColor:"rgba(255,255,255,0.3)"}},i.a.createElement("div",{style:{flexDirection:"row",display:"flex"}},Object.values(ne).map(function(t,n){var o=t.isContext?e.context:e.state;return i.a.createElement(Z.a,{type:o[t.key]?"danger":"primary",key:"ButtonConfigs"+n,style:{paddingHorizontal:5,paddingVertical:5,alignItems:"center",justifyContent:"center",marginRight:10},onClick:function(){e.onButton(t.id)},icon:o[t.key]?t.iconH:t.iconN})})))):null,i.a.createElement(Z.a,{className:"menu-btn",type:e.state.togglePageSelection?"danger":"primary",shape:"circle",icon:e.state.togglePageSelection?"menu-unfold":"menu-fold",onClick:function(){e.state[ne.server.key]=!1,e.state[ne.scroll.key]=!1,e.setState({togglePageSelection:!e.state.togglePageSelection})}}),0==e.state.contentOffset?null:i.a.createElement("div",{style:{position:"absolute",left:15,width:32,height:32,borderRadius:16,borderWidth:2,borderColor:"#fee",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.6)"},onClick:function(){e.setState({contentOffset:0})}},i.a.createElement(k.a,{type:"arrowup",size:23,color:"#fee"})),i.a.createElement(X.a,null))}},{key:"onButton",value:function(e){var t=this,n=t.context.toggleImage,o=ne[e];switch(o.id){case ne.visible.id:t.state[o.key]=!t.state[o.key],t.setState({});break;case ne.text.id:t.state[o.key]=!t.state[o.key],t.setState({},function(){_.a.saveToLocal(o.key,t.state[o.key])});break;case ne.image.id:n&&n();break;case ne.scroll.id:t.state[o.key]=!0,t.setState({togglePageSelection:!1});break;case ne.server.id:t.state[o.key]=!0,t.setState({togglePageSelection:!1},function(){t.gitee.getConfigFile(function(e){var n=[],o={},i={};t.state.currentPages.forEach(function(e,t){o[e.config]=t}),t.giteeConfigs.forEach(function(e,t){i[e.config]=t}),e.forEach(function(e){var i=o[e.config];i>=0?t.state.currentPages[i]=e:n.push(e)}),e.forEach(function(e){i[e.config]=e}),t.giteeConfigs=Object.values(i),_.a.saveToLocal("GiteeConfigsKey",t.giteeConfigs),t.setState({currentPages:t.state.currentPages.concat(n)})})});break;case ne.helper.id:t.state[o.key]=!0,t.setState({togglePageSelection:!1});break;case ne.history.id:t.state[o.key]=!t.state[o.key],t.setState({togglePageSelection:!1},function(){t.loadNews()})}}},{key:"startAutoScroll",value:function(){var e=this;e.stopAutoScroll(),e.state.autoScrollEnabled>0&&(e.autoScrollTimer=setInterval(function(){e.autoScroll()},e.state.autoScrollEnabled))}},{key:"stopAutoScroll",value:function(){this.autoScrollTimer&&clearInterval(this.autoScrollTimer)}},{key:"autoScroll",value:function(){}}]),t}(o.Component);ae.contextType=Y;var re=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={screenWidth:window.innerWidth,screenHeight:window.innerHeight,screenBackgroundColor:"#444",visible:!1,testStr:""},e}return Object(g.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){window.addEventListener("resize",this.resize.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize.bind(this))}},{key:"resize",value:function(){this.setState({screenWidth:window.innerWidth,screenHeight:window.innerHeight})}},{key:"render",value:function(){return i.a.createElement(J,null,i.a.createElement("div",{style:{position:"relative",width:this.state.screenWidth,height:this.state.screenHeight,backgroundColor:this.state.screenBackgroundColor}},i.a.createElement(ae,null)))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},66:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return evalTemplate});var moment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(231),moment__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__),cheerio__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(20),cheerio__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(cheerio__WEBPACK_IMPORTED_MODULE_1__),_LERequest__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(99),ConsoleSwitch=!1;function evalTemplate(template,context){var execution=null;ConsoleSwitch&&console.log("~~~~~~~~~~~>Begin with template:",template);var user={};try{var bindContext=function(){return eval(template)}.bind({user:user,context:context,moment:moment__WEBPACK_IMPORTED_MODULE_0___default.a,assign:assign,convertResponse:convertResponse,request:appRequest,Cheerio:cheerio__WEBPACK_IMPORTED_MODULE_1___default.a});execution=bindContext(),bindContext=void 0}catch(ex){ConsoleSwitch&&console.log("~~~~~~~~~~~>Eval exception:"+ex)}return"function"!=typeof execution&&(execution=function(){return template}),ConsoleSwitch&&console.log("~~~~~~~~~~~>Eval return(function):",execution),execution}function appRequest(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"get",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0;new _LERequest__WEBPACK_IMPORTED_MODULE_2__.a("",t,n).api(e).success(function(e,t){o&&o(e,t)}).error(function(e){i&&i(e)}).run({type:a,data:r,dataType:s,timeout:c})}function explainValueTemplate(e){if("string"===typeof e){var t=e.match(/%\{.*?\}/gi);if(t)return t.map(function(e){return{raw:e,valueId:e.replace("%{","").replace("}","")}})}return[]}function replaceWithExplainedValue(e,t,n){var o=t;return e.length>0&&e.forEach(function(e){o=o.replace(e.raw,n[e.valueId]||"")}),o}function convertResponse(e){switch(e.headers.get("Content-Type").replace(/;.*charset=.*/gi,"")){case"text/html":case"text/plain":return e.text();case"application/json":return e.json();default:return e.blob()}}function format(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parse(e){return e.toString().replace(/\$\s?|(,*)/g,"")}function assign(e){var t;if("object"===typeof e&&null!==e)for(var n in t=Array.isArray(e)?[]:{},e)"object"===typeof e[n]&&0!==!n.indexOf("_")?t[n]=this.assign(e[n]):t[n]=e[n];else t=e;return t}function empty(e){return void 0===e||""===e||null===e}function getStringLen(e){return null===e||void 0===e?0:("string"!=typeof e&&(e+=""),e.replace(/[^\x00-\xff]/g,"01").length)}},99:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var o=n(9),i=n(5),a=n(10),r=n.n(a),s=n(2),c={Idle:"",Timeout:"408",Success:"1",Failure:"0"},l=function(){function e(t,n){Object(o.a)(this,e);this.uuid=s.a.uuid(16),this.onSuccess=void 0,this.onError=void 0,this.apiHost=void 0,this.method=void 0,this.endPoint=void 0,this.data=void 0,this.dataType=void 0,this.defaultHeaders=void 0,this.enableToast=!0,this.methodMap={0:"HEAD",1:"GET",2:"DELETE",3:"POST",4:"PUT",5:"PATCH"},this.apiHost=t,this.defaultHeaders=n||{},this.timeout=3e3,this.responseStatus=c.Idle}return Object(i.a)(e,[{key:"api",value:function(e,t){return this.endPoint=e,this.enableToast=t||this.enableToast,this}},{key:"success",value:function(e){return this.onSuccess=e,this}},{key:"error",value:function(e){return this.onError=e,this}},{key:"head",value:function(e){return this.method=0,this.timeout=e||this.timeout,this.exec(),this}},{key:"get",value:function(e){return this.method=1,this.timeout=e||this.timeout,this.exec(),this}},{key:"delete",value:function(e){return this.method=2,this.timeout=e||this.timeout,this.exec(),this}},{key:"post",value:function(t,n,o){return this.method=3,this.timeout=o||this.timeout,this.data=t||{},this.dataType=n||e.dataTypeMap.urlForm,this.exec(),this}},{key:"put",value:function(t,n,o){return this.method=4,this.timeout=o||this.timeout,this.data=t||{},this.dataType=n||e.dataTypeMap.urlForm,this.exec(),this}},{key:"patch",value:function(t,n,o){return this.method=5,this.timeout=o||this.timeout,this.data=t||{},this.dataType=n||e.dataTypeMap.urlForm,this.exec(),this}},{key:"run",value:function(e){var t=e.type,n=e.data,o=e.dataType,i=e.timeout;switch(t){case"get":return this.get(i,o);case"head":return this.head(i);case"delete":return this.delete(i);case"post":return this.post(n,o,i);case"put":return this.put(n,o,i);case"patch":return this.patch(n,o,i)}}},{key:"cancelRequest",value:function(){return this.responseStatus==c.Idle&&this.requestPromise&&this.requestPromise.abort&&this.requestPromise.abort(),this}},{key:"warp_fetch",value:function(e){var t=this,n=null,o=null,i=new Promise(function(e,o){n=function(){if(t.responseStatus==c.Idle){t.responseStatus=c.Timeout;var e={statusCode:c.Timeout,msg:"\u8bf7\u6c42\u8d85\u65f6",url:t.apiHost+t.endPoint,timeout:t.timeout,uuid:t.uuid};o(e),t.onError?t.onError(e):t.enableToast&&r.a.error({message:"\u8bf7\u6c42\u8d85\u65f6"}),console.log("\u8bf7\u6c42\u8d85\u65f6:",{timeOutError:e,url:t.apiHost+t.endPoint})}}}),a=new Promise(function(e,n){o=function(){t.responseStatus==c.Idle&&(t.responseStatus=c.Abort,n({statusCode:-1,msg:"\u8bf7\u6c42\u53d6\u6d88",url:t.apiHost+t.endPoint,timeout:t.timeout,uuid:t.uuid}))}}),s=Promise.race([e,i,a]);return setTimeout(n,t.timeout),s.abort=o,s}},{key:"execFetch",value:function(){var t=this,n=new Headers(t.defaultHeaders),o={method:this.methodMap[t.method]};t.method>2&&(n.get("Content-Type")||(console.log("head",n.get("Content-Type")),n.append("Content-Type",t.dataType)),t.dataType==e.dataTypeMap.urlForm&&t.data instanceof Object?t.data=t.urlParam(t.data):t.dataType==e.dataTypeMap.json&&t.data instanceof Object&&(t.data=JSON.stringify(t.data)),o.body=t.data),o.headers=n;var i=t.apiHost+t.endPoint;console.log("api",i,o),t.requestPromise=t.warp_fetch(new Promise(function(e,t){fetch(i,o).then(function(t){e(t)}).catch(function(e){t(e)})})).then(function(e){e.status>=200&&e.status<=300?t.responseStatus==c.Idle&&(t.responseStatus=c.Success,t.onSuccess(e.status,e,t.uuid)):e.json().then(function(n){var o=n&&n.errormsg&&n.errormsg.length>0?n.errormsg:void 0;o&&(t.responseStatus==c.Idle&&(t.responseStatus=c.Failure,t.onError?t.onError(o):t.enableToast&&r.a.error({message:o})),console.log("ErrorMsg from server:",{msg:o,status:e.status,url:t.apiHost+t.endPoint}))}).catch(function(n){t.responseStatus==c.Idle&&(t.responseStatus=c.Failure,t.onError?t.onError("\u8bf7\u6c42\u5931\u8d25"):t.enableToast&&r.a.error({message:"\u8bf7\u6c42\u5931\u8d25"})),console.log("Unknown Error:",{error:n,msg:"\u8bf7\u6c42\u5931\u8d25",status:e.status,url:t.apiHost+t.endPoint})})}).catch(function(e){t.responseStatus==c.Idle&&(t.responseStatus=c.Failure,t.onError?(t.onError(e,t.uuid),console.log("status:",e,t.apiHost,t.endPoint)):t.enableToast&&(r.a.error({message:"\u8bf7\u6c42\u5931\u8d25"}),console.log("status:","\u8bf7\u6c42\u5931\u8d25",t.apiHost,t.endPoint)))})}},{key:"exec",value:function(){this.execFetch()}},{key:"urlParam",value:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")}}]),e}();l.dataTypeMap={urlForm:"application/x-www-form-urlencoded;charset=UTF-8",multipartForm:"multipart/form-data",json:"application/json;charset=UTF-8"}}},[[237,1,2]]]);
//# sourceMappingURL=main.f1111c6e.chunk.js.map